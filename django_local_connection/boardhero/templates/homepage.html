<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
		<meta name="description" content="">
		<meta name="author" content="">
		<!--<link rel="icon" href="favicon.ico">-->
		<title>LocalTEST</title>
		<!-- Bootstrap core CSS -->
        {% load static %}
		<link href="{% static 'css/bootstrap.min.css'%}" rel="stylesheet">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
		<!-- Custom styles for this template -->
		<link href="{% static 'css/style.css'%}" rel="stylesheet">
		<link rel="stylesheet" href="../static/css/bootstrap-theme.css">
		<link rel="stylesheet" href="../static/css/bootstrap.min.css">
		<link rel="stylesheet" href="../static/css/bootstrap.css">
	</head>
	<body id="page-top">
		<!-- Navigation -->
		<nav class="navbar navbar-default">
			<div class="container">
                <div class="navbar-header page-scroll">
                    <h1>NBA ADDICTS --- LocalTEST<hr/>
						<h5>Analysis performance of each players in NBA</h5>
						<br>
				</div>
				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav navbar-right">
						<li class="hidden">
							<a href="#page-top"></a>
						</li>
						<li>
							<a class="page-scroll" href="#best">best</a>
						</li>
						<li>
							<a class="page-scroll" href="#search">Search</a>
						</li>
                        <li>
							<a class="page-scroll" href="#statistic">league</a>
						</li>
						<li>
							<a class="page-scroll" href="#about">Show All</a>
						</li>
                        <li>
							<a class="page-scroll" href="#author">Author</a>
						</li>
						<li>
							<a class="page-scroll" href="#contact">Contact</a>
						</li>
					</ul>
				</div>
				<!-- /.navbar-collapse -->
			</div>
			<!-- /.container-fluid -->
		</nav>

		<section id="best">
            {% load staticfiles %}
			<div class="container">
			<div class="row">
				<div class="col-lg-12 text-center">
					<div class="section-title">
						<h2>The Best Records in the last game</h2>
					</div>
				</div>
			</div>
			<div class="row row-0-gutter">
				<!-- start portfolio item -->
				<div class="col-md-6 col-0-gutter">
					<div class="ot-portfolio-item">
						<figure class="effect-bubba">
							<img src="{% static 'images/demo/dunk2.jpg' %}" alt="img02" class="img-responsive" />
							<figcaption>
								<h2>{{ pts_best.bestname }}</h2>
								<p>PTS: {{ pts_best.data }}</p>
							</figcaption>
						</figure>
					</div>
				</div>
				<!-- end portfolio item -->

				<!-- start portfolio item -->
				<div class="col-md-6 col-0-gutter">
					<div class="ot-portfolio-item">
						<figure class="effect-bubba">
							<img src="{% static 'images/demo/pass.jpg' %}" alt="img02" class="img-responsive" />
							<figcaption>
								<h2>{{ ast_best.bestname }}</h2>
								<p>AST: {{ ast_best.data }}</p>
								<a href="#" data-toggle="modal" data-target="#Modal-2">View more</a>
							</figcaption>
						</figure>
					</div>
				</div>
				<!-- end portfolio item -->
			</div>
			<div class="row row-0-gutter">
				<!-- start portfolio item -->
				<div class="col-md-6 col-0-gutter">
					<div class="ot-portfolio-item">
						<figure class="effect-bubba">
							<img src="{% static 'images/demo/block3.jpg' %}" alt="img02" class="img-responsive" />
							<figcaption>
								<h2>{{ blk_best.bestname }}</h2>
								<p>BLK: {{ blk_best.data }}</p>
								<a href="#" data-toggle="modal" data-target="#Modal-3">View more</a>
							</figcaption>
						</figure>
					</div>
				</div>
				<!-- end portfolio item -->
				<!-- start portfolio item -->
				<div class="col-md-6 col-0-gutter">
					<div class="ot-portfolio-item">
						<figure class="effect-bubba">
							<img src="{% static 'images/demo/mad.jpg'%}" alt="img02" class="img-responsive" />
							<figcaption>
								<h2>{{ tov_best.bestname }}</h2>
								<p>TOV: {{ tov_best.data }}</p>
								<a href="#" data-toggle="modal" data-target="#Modal-4">View more</a>
							</figcaption>
						</figure>
					</div>
				</div>
				<!-- end portfolio item -->
			</div>
			<div class="row row-0-gutter">
				<!-- start portfolio item -->
				<div class="col-md-6 col-0-gutter">
					<div class="ot-portfolio-item">
						<figure class="effect-bubba">
							<img src="{% static 'images/demo/win.jpg' %}" alt="img02" class="img-responsive" />
							<figcaption>
								<h2>{{ eff_best.bestname }}</h2>
								<p>EFF: {{ eff_best.data }}</p>
								<a href="#" data-toggle="modal" data-target="#Modal-5">View more</a>
							</figcaption>
						</figure>
					</div>
				</div>
				<!-- end portfolio item -->
				<!-- start portfolio item -->
				<div class="col-md-6 col-0-gutter">
					<div class="ot-portfolio-item">
						<figure class="effect-bubba">
							<img src="{% static 'images/demo/look.jpg' %}" alt="img02" class="img-responsive" />
							<figcaption>
								<h2>{{ per_best.bestname }}</h2>
								<p>PER: {{ per_best.data }}</p>
								<a href="#" data-toggle="modal" data-target="#Modal-2">View more</a>
							</figcaption>
						</figure>
					</div>
				</div>
				<!-- end portfolio item -->
			</div>
			</div><!-- container -->
		</section>


        <section id="search">
			<div class="container">
                <div class="row">
                    <div class="col-lg-12 text-center">
                        <div class="section-title">
                            <h2>Search</h2>
                            <p>{{ time.data0 }} 球員最近一次比賽數據 {{error}}</p>
                            <p> How about {{ random_guy.name }} , he is a good player</p>
                            <!-- graph -->
                            <form method="GET" action="{% url 'search' %}">
                                <input name="q" value="{{ request.GET.q }}" placeholder="a player..">
                                <button class="btn btn-success" tpye="submit">
                                    Search
                                </button>
                            </form>
							<a href="#" data-toggle="modal" data-target="#Modal-1">{{lines}}'s Time lapse Data</a>
                        </div>
                    </div>
                </div>

                {% block graph %}
                    {% load staticfiles %}
                        <div align="center" id="graphDiv1"></div>
                        <h4  align="center">Percentage of {{lines}}'s performance in NBA league</h4>
                        <br />
                        <script src="{% static 'excanvas.js' %}"></script>
                        <script src="{% static 'html5-canvas-bar-graph.js' %}"></script>
                        <script>(function () {

                            function createCanvas(divName) {

                                var div = document.getElementById(divName);
                                var canvas = document.createElement('canvas');
                                div.appendChild(canvas);
                                if (typeof G_vmlCanvasManager != 'undefined') {
                                    canvas = G_vmlCanvasManager.initElement(canvas);
                                }
                                var ctx = canvas.getContext("2d");
                                return ctx;
                            }

                            var ctx = createCanvas("graphDiv1");

                            var graph = new BarGraph(ctx);
                            graph.maxValue = 400;
                            graph.margin = 10;
                            graph.width = 800;
                            graph.height = 200;
                            graph.xAxisLabelArr = ['PTS','FG%','FT%','TP%','AST','STL','BLK','ORB','DRB','TOV','PER'];
                            setInterval(function () {
								var pts = {{ meanlist.pts}}
								var pts_base = {{ meanlist_base.pts}}
								var fg = {{ meanlist.fgm}}*100 /{{ meanlist.fga}}
								var fg_base = {{ meanlist_base.fgm}}*100 /{{ meanlist_base.fga}}
								var ft = {{ meanlist.ftm}}*100 /{{ meanlist.fta}}
								var ft_base = {{ meanlist_base.ftm}}*100 /{{ meanlist_base.fta}}
								var tp = {{ meanlist.tpm}}*100 /{{ meanlist.tpa}}
								var tp_base = {{ meanlist_base.tpm}}*100 /{{ meanlist_base.tpa}}
								var ast = {{ meanlist.ast}};
								var ast_base = {{meanlist_base.ast}};
								var stl = {{ meanlist.stl}};
								var stl_base = {{meanlist_base.stl}};
								var blk = {{ meanlist.blk}};
								var blk_base = {{meanlist_base.blk}};
								var orb = {{ meanlist.orb}};
								var orb_base = {{meanlist_base.orb}};
								var drb = {{ meanlist.drb}};
								var drb_base = {{meanlist_base.drb}};
								var tov = {{ meanlist.tov}};
								var tov_base = {{meanlist_base.tov}};
								var per = {{ meanlist.per}};
								var per_base = {{meanlist_base.per}};
                                graph.update([pts*100/pts_base,fg*100/fg_base,ft*100/ft_base,tp*100/tp_base,ast*100/ast_base,stl*100/stl_base,blk*100/blk_base,orb*100/orb_base,drb*100/drb_base,tov*100/tov_base,per*100/per_base]);
                            }, 2000);
                        }());</script>
                {% endblock %}

			</div><!-- container -->
		</section>


        <section id="statistic">
			<div class="container">
                <div class="row">
                    <div class="col-lg-12 text-center">
                        <div class="section-title">
                            <h2>League Average</h2>
                            <h5>{{ lg_error }}</h5>
                        </div>
                    </div>
                </div>

                {% block league %}
                    {% load staticfiles %}
						<table align="center" border="3" cellpadding="0" cellspacing="8">
							<th> 球員 </th><th> 得分 </th><th> 進攻籃板 </th><th> 防守籃板 </th><th> 兩分出手 </th><th> 兩分命中 </th><th> 罰球出手 </th>
							<th> 罰球命中 </th><th> 三分出手 </th><th> 三分命中 </th><th> 助攻 </th><th> 阻攻 </th><th> 效率值 </th><th> PER </th>

								<tr>
									<td align="center">{{lg_mean.name}} </td>
									<td align="center">{{lg_mean.pts}} </td>
									<td align="center">{{lg_mean.orb}} </td>
									<td align="center">{{lg_mean.drb}} </td>
									<td align="center">{{lg_mean.fga}} </td>
									<td align="center">{{lg_mean.fgm}} </td>
									<td align="center">{{lg_mean.fta}} </td>
									<td align="center">{{lg_mean.ftm}} </td>
									<td align="center">{{lg_mean.tpa}} </td>
									<td align="center">{{lg_mean.tpm}} </td>
									<td align="center">{{lg_mean.ast}} </td>
									<td align="center">{{lg_mean.blk}} </td>
									<td align="center">{{lg_mean.eff}} </td>
									<td align="center">{{lg_mean.per}} </td>
								</tr>

						</table>

                {% endblock %}

			</div><!-- container -->
		</section>



		<section id="about" class="mz-module">
			<div class="container light-bg">
				<div class="row">
					<div class="col-lg-12 text-center">
						<div class="section-title">
                            <hr />
							<h2>Show All Players</h2>
						</div>
					</div>
				</div>


                <table align="center" border="1" cellpadding="0" cellspacing="1">
                <th> 球員 </th><th> 上場時間 </th><th> 得分 </th><th> 進攻籃板 </th><th> 防守籃板 </th><th> 兩分出手 </th><th> 兩分命中 </th><th> 罰球出手 </th>
                <th> 罰球命中 </th><th> 三分出手 </th><th> 三分命中 </th><th> 助攻 </th><th> 阻攻 </th><th> 效率值 </th><th> PER </th>
                {% for lg_one in items %}
                    <tr>
                        <td>{{lg_one.name}} </td>
                        <td>{{lg_one.ontime}} </td>
                        <td>{{lg_one.pts}} </td>
                        <td>{{lg_one.orb}} </td>
                        <td>{{lg_one.drb}} </td>
                        <td>{{lg_one.fga}} </td>
                        <td>{{lg_one.fgm}} </td>
                        <td>{{lg_one.fta}} </td>
                        <td>{{lg_one.ftm}} </td>
                        <td>{{lg_one.tpa}} </td>
                        <td>{{lg_one.tpm}} </td>
                        <td>{{lg_one.ast}} </td>
                        <td>{{lg_one.blk}} </td>
                        <td>{{lg_one.eff}} </td>
                        <td>{{lg_one.per}} </td>
                    </tr>
                {% endfor %}
                </table>
                {% block content %}
                    {% include 'paginator.html' %}
                {% endblock %}


			</div>
			<!-- /.container -->
		</section>



        <section id="author" class="mz-module">
			<div class="container light-bg">
				<div class="row">
					<div class="col-lg-12 text-center">
						<div class="section-title">
							<h2>Author</h2>
						</div>
					</div>
				</div>

					<!-- team member item -->
					<div class="col-lg-12 text-center">
						<div class="team-image" align="center">
							<img src="{% static 'images/my-2.jpg' %}" class="img-responsive" alt="author">
						</div>
					</div>
					<!-- end team member item -->

					<!-- team member item -->
					<div class="col-lg-12 text-center">
						<div class="team-text">
							<h3>Po Ting Lin</h3>
							<div class="team-position">Biomedical engineer</div>
							<p>A little Spurs fan</p>
							<p>Web template: http://mozthemes.com/demo/treviso/</p>
						</div>
					</div>
					<!-- end team member item -->

				</div>
			</div>
		</section>


		<section id="contact">
			<div class="container">
				<div class="row">
					<div class="col-lg-12 text-center">
						<div class="section-title">
							<h2>Contact Us</h2>
							<p>If you have some Questions or need Help! Please Contact Us!</p>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-lg-12 text-center">
						<form name="sentMessage" id="contactForm" novalidate="">
							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<input type="text" class="form-control" placeholder="Your Name *" id="name" required="" data-validation-required-message="Please enter your name.">
										<p class="help-block text-danger"></p>
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										<input type="email" class="form-control" placeholder="Your Email *" id="email" required="" data-validation-required-message="Please enter your email address.">
										<p class="help-block text-danger"></p>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-12">
									<div class="form-group">
										<textarea class="form-control" placeholder="Your Message *" id="message" required="" data-validation-required-message="Please enter a message."></textarea>
										<p class="help-block text-danger"></p>
									</div>
								</div>
								<div class="clearfix"></div>
							</div>
							<div class="row">
								<div class="col-lg-12 text-center">
									<div id="success"></div>
									<button type="submit" class="btn">Send Message</button>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</section>
		<p id="back-top">
			<a href="#top"><i class="fa fa-angle-up"></i></a>
		</p>
		<footer>
			<div class="container text-center">
				<p>Designed by <a href="https://www.linkedin.com/in/po-ting-lin-333aa1155"><span>Po Ting Lin</span> , who passionated on nba game</a></p>
                <p>Mail: <a><span>R06945048@ntu.edu.tw</span></a></p>

			</div>
		</footer>
		
		
		<!-- Modal for portfolio item 1 -->
		<div class="modal fade" id="Modal-1" tabindex="-1" role="dialog" aria-labelledby="Modal-label-1">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="Modal-label-1">{{lines}}</h4>
					</div>
					<div class="modal-body">
						<table align="center" border="1" cellpadding="0" cellspacing="5">
							<th> 球員 </th><th> 比賽時間 </th><th> 上場時間 </th><th> 得分 </th><th> 進攻籃板 </th><th> 防守籃板 </th><th> 兩分出手 </th><th> 兩分命中 </th><th> 罰球出手 </th>
							<th> 罰球命中 </th><th> 三分出手 </th><th> 三分命中 </th><th> 助攻 </th><th> 阻攻 </th><th> 效率值 </th><th> PER </th>
								{% for tld_p in tld %}
								<tr>
									<td align="center">{{tld_p.name}} </td>
									<td align="center">{{tld_p.year}} {{tld_p.month}} {{tld_p.day}}</td>
									<td align="center">{{tld_p.ontime}} </td>
									<td align="center">{{tld_p.pts}} </td>
									<td align="center">{{tld_p.orb}} </td>
									<td align="center">{{tld_p.drb}} </td>
									<td align="center">{{tld_p.fga}} </td>
									<td align="center">{{tld_p.fgm}} </td>
									<td align="center">{{tld_p.fta}} </td>
									<td align="center">{{tld_p.ftm}} </td>
									<td align="center">{{tld_p.tpa}} </td>
									<td align="center">{{tld_p.tpm}} </td>
									<td align="center">{{tld_p.ast}} </td>
									<td align="center">{{tld_p.blk}} </td>
									<td align="center">{{tld_p.eff}} </td>
									<td align="center">{{tld_p.per}} </td>
								</tr>
								{% endfor %}
							</table>
						<p>HERE {{ lineplot1.orb }}</p>
						<canvas id="canvas" width=1000 height=650></canvas>
							<script>
								var canvas = document.getElementById("canvas");
								var startX = 100;
								var startY = 600;
								var ctx = canvas.getContext('2d');
								var data = [0,10,20,30,40,50];		//座標軸座標
								var point = [[100,{{ lineplot1.pts }}*10],[150,{{ lineplot2.pts }}*10],[200,{{ lineplot3.pts }}*10],[250,{{ lineplot4.pts }}*10],[300,{{ lineplot5.pts }}*10]];	//點座標
								//建立座標系
								function creat(){
									ctx.beginPath();
									ctx.moveTo(startX,50);
									ctx.lineTo(startX,startY);
									ctx.moveTo(startX,startY);
									ctx.lineTo(650,startY);
									ctx.closePath();
									ctx.stroke();

								}
								//填充橫縱座標
								function insert(){
									var x = 100;
									var y = 600;
									//繪製橫座標
									for(var i in data){
										ctx.fillText(data[i],x,y+20);
										x += 100;
									}
									x = 100;
									y = 600;
									//繪製縱座標
									for(var i in data){
										ctx.fillText(data[i],x-20,y);
										y -= 100;
									}
								}
								//繪製折線
								var num = 0;
								var sh = setInterval(function(){
									//只有第一個點重新開始繪製
									if(num == 0)
										ctx.beginPath();
									//終止
									if(num == 8){
										clearInterval(sh);
									}
									var x = point[num][0];
									var y = point[num][1];
									//轉換座標
									x += 100;
									y = startY - y;
									ctx.arc(x,y, 2, 0, 2*Math.PI);
									//進行點的內部連線
									if(num != 0)
										ctx.lineTo(x,y);
									num++;
									ctx.moveTo(x,y);
									ctx.strokeStyle = "#3FA7DC";
									//連線邊框
									ctx.stroke();
									console.log(num);
								}, 40);
								creat();
								insert();
							</script>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Bootstrap core JavaScript
			================================================== -->
		<!-- Placed at the end of the document so the pages load faster -->
        {% load staticfiles %}
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<script src="{% static 'js/bootstrap.min.js' %}"></script>
		<script src="{% static 'js/SmoothScroll.js'%}"></script>
		<script src="{% static 'js/theme-scripts.js'%}"></script>
	</body>
</html>
